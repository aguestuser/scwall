# SCWALL

## Overview

`scwall` is a cli utility written in rust that allows users to send encrypted terminal spam to all other users logged into the same server as them. Like the fabled linux cli tool, `wall`, `scwall` enables a sender to interrupt the terminal sessions of all other users with an unwanted message. However, unlike `wall`, `scwall` enables the sender to encrypt their message to a specified recipient. The recipient will be interrupted and prompted to enter a password to decrypt their `scwall` message. All other users will have their terminal sessions interrupted by an encrypted cyphertext bytestream (with sufficient padding to ensure a lenghty interruption).

`scwall` was first conceived at the Recurse Center's first ever SOUTH by SOUTH. (Stupid Or Useful Things Hackaton by Serious Opensource Users Trying Hamburgers.)

## Specs

Upon login, all users on `scwall`-enabled servers will be redirected to a scwall shell (aka a `shcwell`). Upon initiating a `shcwell` session, a user is prompted for a password (which must contain at least 2 non-consecutive prime numbers above 65,537). Passwords for each session are persisted by the system and users are not permitted to re-use the same password more than once per session. When a password is received, `shcwell` generates a NaCl public/private keypair, and encrypts the private key with a symmetric key generated by running the user's password through a cryptographically secure key derivation function.

After a successful login, each `shcwell` session forks a child `bash` process and redirects sdout/sdtin to/from it appropriately, allowing terminal sessions to continue as normal.

After login, each `shcwell` session also creates an io file descriptor in `/dev/shcwellin`. When encrypted messages are sent to a shcwell's corresponding `shcwellin` file descriptor, the user is interrupted and prompted to enter their scwallpass. Entering the correct scwallpass decrypts the user's private key, which is used to decrypt the message and pipe it to the terminal. (If the user attempts to control-c out of the prompt, they are greeted with the output of [sl](https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html).)

For more details see TODO.md
